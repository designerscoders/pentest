/**
*@name      index.js
*@desc      a simple device mode toggle  tool
*@author    yaseng@uauc.net 
**/


var { ToggleButton } = require("sdk/ui/button/toggle");
var prefs = require("sdk/preferences/service");
var key = "general.useragent.override";


var button = ToggleButton({
  id: "Mobile-toggle",
  label: "Toggle mobile mode",
    icon: {
    "16": "./icon-16.png",
    "32": "./icon-32.png",
    "64": "./icon-64.png"
    },
    onChange: handleClick 
  });


function  handleClick(state) {

      var  mobile_user_agent='Mozilla/5.0 (iPhone; CPU iPhone OS 8_0 like Mac OS X) AppleWebKit/600.1.3 (KHTML, like Gecko) Version/8.0 Mobile/12A4345d Safari/600.1.4';
      if (state.checked){

      	prefs.set(key,mobile_user_agent);

      }else{
   
        prefs.reset(key);

      }
       
}